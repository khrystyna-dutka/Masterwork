# üöÄ –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –ø–æ –∑–∞–ø—É—Å–∫—É EcoLviv Backend

## ‚úÖ –©–æ –≤–∂–µ –∑—Ä–æ–±–ª–µ–Ω–æ

### 1. –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –ø—Ä–æ–µ–∫—Ç—É
- ‚úÖ –°—Ç–≤–æ—Ä–µ–Ω–æ Node.js –ø—Ä–æ–µ–∫—Ç
- ‚úÖ –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –≤—Å—ñ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
- ‚úÖ –ù–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–æ–∫

### 2. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ –ø–∞–∫–µ—Ç–∏

**Production –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:**
- `express` - Web framework
- `cors` - –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ CORS
- `dotenv` - –ó–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
- `helmet` - –ë–µ–∑–ø–µ–∫–∞ HTTP –∑–∞–≥–æ–ª–æ–≤–∫—ñ–≤
- `morgan` - HTTP –ª–æ–≥—É–≤–∞–Ω–Ω—è
- `express-validator` - –í–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö
- `bcryptjs` - –•–µ—à—É–≤–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—ñ–≤
- `jsonwebtoken` - JWT –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è

**Development –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:**
- `nodemon` - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

### 3. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
backend/
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ config.js          # –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ middleware/
‚îÇ   ‚îú‚îÄ‚îÄ errorHandler.js    # –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫
‚îÇ   ‚îî‚îÄ‚îÄ logger.js          # –õ–æ–≥—É–≤–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—ñ–≤
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îî‚îÄ‚îÄ helpers.js         # –î–æ–ø–æ–º—ñ–∂–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó
‚îú‚îÄ‚îÄ routes/                # –ú–∞—Ä—à—Ä—É—Ç–∏ API (–¥–ª—è –º–∞–π–±—É—Ç–Ω—å–æ–≥–æ)
‚îú‚îÄ‚îÄ controllers/           # –ö–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∏ (–¥–ª—è –º–∞–π–±—É—Ç–Ω—å–æ–≥–æ)
‚îú‚îÄ‚îÄ models/                # –ú–æ–¥–µ–ª—ñ –¥–∞–Ω–∏—Ö (–¥–ª—è –º–∞–π–±—É—Ç–Ω—å–æ–≥–æ)
‚îú‚îÄ‚îÄ .env                   # –ó–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
‚îú‚îÄ‚îÄ .env.example           # –ü—Ä–∏–∫–ª–∞–¥ –∑–º—ñ–Ω–Ω–∏—Ö
‚îú‚îÄ‚îÄ .gitignore            # Git ignore
‚îú‚îÄ‚îÄ package.json          # NPM –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ server.js             # –ì–æ–ª–æ–≤–Ω–∏–π —Ñ–∞–π–ª
‚îî‚îÄ‚îÄ README.md             # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
```

## üéØ –Ø–∫ –∑–∞–ø—É—Å—Ç–∏—Ç–∏

### –†–µ–∂–∏–º —Ä–æ–∑—Ä–æ–±–∫–∏ (–∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–º –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–º)
```bash
cd backend
npm run dev
```

### Production —Ä–µ–∂–∏–º
```bash
cd backend
npm start
```

## üåê –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è API

–ü—ñ—Å–ª—è –∑–∞–ø—É—Å–∫—É —Å–µ—Ä–≤–µ—Ä –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π –Ω–∞ `http://localhost:5000`

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–æ–±–æ—Ç–∏
```bash
curl http://localhost:5000
```

–í—ñ–¥–ø–æ–≤—ñ–¥—å:
```json
{
  "success": true,
  "message": "EcoLviv API –ø—Ä–∞—Ü—é—î —É—Å–ø—ñ—à–Ω–æ! üå±",
  "version": "1.0.0",
  "timestamp": "2025-10-22T19:14:49.123Z"
}
```

### Health Check
```bash
curl http://localhost:5000/health
```

## üîß –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

### –ó–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ (.env)

```env
# –°–µ—Ä–≤–µ—Ä
PORT=5000
NODE_ENV=development

# JWT
JWT_SECRET=your_jwt_secret_key_min_32_characters
JWT_EXPIRE=30d

# CORS
FRONTEND_URL=http://localhost:3000

# –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö (–±—É–¥–µ –¥–æ–¥–∞–Ω–æ –ø—ñ–∑–Ω—ñ—à–µ)
DB_HOST=localhost
DB_USER=root
DB_PASSWORD=
DB_NAME=ecolv_db
```

## üìù –©–æ –¥–∞–ª—ñ?

### –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏ —Ä–æ–∑—Ä–æ–±–∫–∏:

1. **–ë–∞–∑–∞ –¥–∞–Ω–∏—Ö**
   - –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è MySQL/PostgreSQL
   - –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å—Ö–µ–º–∏ –ë–î
   - –ú—ñ–≥—Ä–∞—Ü—ñ—ó

2. **–ê–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è**
   - –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
   - –õ–æ–≥—ñ–Ω/–ª–æ–≥–∞—É—Ç
   - JWT —Ç–æ–∫–µ–Ω–∏
   - –ó–∞—Ö–∏—â–µ–Ω—ñ –º–∞—Ä—à—Ä—É—Ç–∏

3. **API –¥–ª—è —Ä–∞–π–æ–Ω—ñ–≤**
   - GET /api/districts - —Å–ø–∏—Å–æ–∫ —Ä–∞–π–æ–Ω—ñ–≤
   - GET /api/districts/:id - —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ —Ä–∞–π–æ–Ω
   - GET /api/districts/:id/air-quality - –¥–∞–Ω—ñ –ø—Ä–æ —è–∫—ñ—Å—Ç—å –ø–æ–≤—ñ—Ç—Ä—è

4. **API –¥–ª—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É**
   - GET /api/monitoring/current - –ø–æ—Ç–æ—á–Ω—ñ –¥–∞–Ω—ñ
   - GET /api/monitoring/history - —ñ—Å—Ç–æ—Ä—ñ—è
   - GET /api/monitoring/forecast - –ø—Ä–æ–≥–Ω–æ–∑

5. **–ö–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è**
   - GET /api/users/profile - –ø—Ä–æ—Ñ—ñ–ª—å
   - PUT /api/users/profile - –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—é
   - GET /api/users/subscriptions - –ø—ñ–¥–ø–∏—Å–∫–∏ –Ω–∞ —Ä–∞–π–æ–Ω–∏

6. **–°–ø–æ–≤—ñ—â–µ–Ω–Ω—è**
   - Email —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è
   - Telegram –±–æ—Ç
   - Push notifications

7. **–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó**
   - OpenWeather API
   - Google Maps API
   - –î–∞—Ç—á–∏–∫–∏ —è–∫–æ—Å—Ç—ñ –ø–æ–≤—ñ—Ç—Ä—è

## üõ°Ô∏è –ë–µ–∑–ø–µ–∫–∞

- ‚úÖ Helmet –¥–ª—è HTTP –∑–∞–≥–æ–ª–æ–≤–∫—ñ–≤
- ‚úÖ CORS –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
- ‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è –≤—Ö—ñ–¥–Ω–∏—Ö –¥–∞–Ω–∏—Ö
- ‚úÖ –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫
- üîÑ JWT –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è (–≤ –ø—Ä–æ—Ü–µ—Å—ñ)
- üîÑ Rate limiting (–ø–ª–∞–Ω—É—î—Ç—å—Å—è)

## üìö –ö–æ—Ä–∏—Å–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó

–£ —Ñ–∞–π–ª—ñ `utils/helpers.js` —î —Ç–∞–∫—ñ —Ñ—É–Ω–∫—Ü—ñ—ó:

- `calculateAQI()` - –æ–±—á–∏—Å–ª–µ–Ω–Ω—è —ñ–Ω–¥–µ–∫—Å—É —è–∫–æ—Å—Ç—ñ –ø–æ–≤—ñ—Ç—Ä—è
- `getAQIStatus()` - —Å—Ç–∞—Ç—É—Å —è–∫–æ—Å—Ç—ñ –ø–æ–≤—ñ—Ç—Ä—è
- `formatDate()` - —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è –¥–∞—Ç–∏
- `generateMockAirQualityData()` - –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è —Ç–µ—Å—Ç–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö
- `isValidEmail()` - –≤–∞–ª—ñ–¥–∞—Ü—ñ—è email
- `generateToken()` - –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è —Ç–æ–∫–µ–Ω—ñ–≤

## üêõ Debugging

–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ:
1. –ß–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –≤—Å—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ: `npm install`
2. –ß–∏ —Å—Ç–≤–æ—Ä–µ–Ω–æ —Ñ–∞–π–ª `.env`
3. –ß–∏ –≤—ñ–ª—å–Ω–∏–π –ø–æ—Ä—Ç 5000
4. –õ–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª—ñ

## üìû –ö–æ–Ω—Ç–∞–∫—Ç–∏

–Ø–∫—â–æ –≤–∏–Ω–∏–∫–Ω—É—Ç—å –ø–∏—Ç–∞–Ω–Ω—è - –∑–≤–µ—Ä—Ç–∞–π—Ç–µ—Å—å!

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ Backend —É—Å–ø—ñ—à–Ω–æ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ —Ç–∞ –≥–æ—Ç–æ–≤–∏–π –¥–æ —Ä–æ–∑—Ä–æ–±–∫–∏!
